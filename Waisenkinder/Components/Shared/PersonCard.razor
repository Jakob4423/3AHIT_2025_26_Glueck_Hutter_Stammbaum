@namespace ITP2Tree.Components.Shared
@using ITP2Tree.Data

<div class="person-card card">
    <div class="card-body d-flex flex-column">
        <div class="d-flex align-items-start">
            <div class="me-3 avatar-placeholder">@Person.Name?[0]</div>
            <div class="flex-grow-1">
                <h5 class="card-title mb-1">@Person.Name</h5>
                <div class="text-muted small">@Person.Geburtsort — @Person.Geburtsdatum</div>
            </div>
            <div class="ms-2 text-end">
                @if (OnEdit.HasDelegate)
                {
                    <button class="btn btn-sm btn-outline-primary me-1" @onclick="() => OnEdit.InvokeAsync(Person)">Bearbeiten</button>
                }
                @if (OnDelete.HasDelegate)
                {
                    <button class="btn btn-sm btn-outline-danger" @onclick="() => OnDelete.InvokeAsync(Person)">Löschen</button>
                }
            </div>
        </div>

        @if (!string.IsNullOrWhiteSpace(Person.Verwandte))
        {
            <div class="mt-3">
                <strong>Verwandte:</strong> <span class="small">@Person.Verwandte</span>
            </div>
        }

        @if (!string.IsNullOrWhiteSpace(Person.Notizen))
        {
            <div class="mt-2 text-muted small">@Person.Notizen</div>
        }
    </div>
</div>

@code {
    [Parameter, EditorRequired]
    public Person Person { get; set; } = null!;

    [Parameter]
    public EventCallback<Person> OnEdit { get; set; }

    [Parameter]
    public EventCallback<Person> OnDelete { get; set; }
}
