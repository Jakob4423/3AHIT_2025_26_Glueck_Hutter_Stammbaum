@* 
    PersonCard-Komponente - Kartendarstellung eines Familienmitglieds.
    Zeigt die wichtigsten Informationen zu einer Person in einer Card.
    Bietet Buttons zum Bearbeiten und Löschen.
*@
@namespace ITP2Tree.Components.Shared
@using ITP2Tree.Data

<div class="person-card card">
    <div class="card-body d-flex flex-column">
        <div class="d-flex align-items-start">
            @* Avatar mit erstem Buchstaben des Namens *@
            <div class="me-3 avatar-placeholder">@(string.IsNullOrEmpty(Person?.Name) ? string.Empty : Person.Name.Substring(0, 1))</div>
            <div class="flex-grow-1">
                <h5 class="card-title mb-1">@Person.Name</h5>
                <div class="text-muted small">@Person.Geburtsort — @Person.Geburtsdatum</div>
            </div>
            @* Edit/Delete Buttons *@
            <div class="ms-2 text-end">
                @if (OnEdit.HasDelegate)
                {
                    <button class="btn btn-sm btn-outline-primary me-1" @onclick="() => OnEdit.InvokeAsync(Person)">Bearbeiten</button>
                }
                @if (OnDelete.HasDelegate)
                {
                    <button class="btn btn-sm btn-outline-danger" @onclick="() => OnDelete.InvokeAsync(Person)">Löschen</button>
                }
            </div>
        </div>

        @* Verwandte - falls vorhanden *@
        @if (!string.IsNullOrWhiteSpace(Person.Verwandte))
        {
            <div class="mt-3">
                <strong>Verwandte:</strong> <span class="small">@Person.Verwandte</span>
            </div>
        }

        @* Notizen - falls vorhanden *@
        @if (!string.IsNullOrWhiteSpace(Person.Notizen))
        {
            <div class="mt-2 text-muted small">@Person.Notizen</div>
        }
    </div>
</div>

@code {
    /// <summary>
    /// Die anzuzeigende Person (erforderlich).
    /// </summary>
    [Parameter, EditorRequired]
    public Person Person { get; set; } = null!;

    /// <summary>
    /// Callback-Event, das aufgerufen wird, wenn der Bearbeiten-Button geklickt wird.
    /// </summary>
    [Parameter]
    public EventCallback<Person> OnEdit { get; set; }

    /// <summary>
    /// Callback-Event, das aufgerufen wird, wenn der Löschen-Button geklickt wird.
    /// </summary>
    [Parameter]
    public EventCallback<Person> OnDelete { get; set; }
}
